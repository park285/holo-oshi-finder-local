<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>localStorage Test</title>
    <style>
        body {
            font-family: 'Pretendard', -apple-system, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #FFB7C5;
            text-align: center;
        }
        .buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        button {
            background: linear-gradient(90deg, #FFB7C5, #FF85C0);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }
        button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        #output {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.5;
        }
        .status {
            text-align: center;
            margin: 10px 0;
            font-weight: 500;
        }
        .success { color: #52C41A; }
        .error { color: #FF7875; }
        .info { color: #85A5FF; }
    </style>
</head>
<body>
    <h1>🌸 Holo-Oshi Finder - localStorage 테스트</h1>
    <div class="buttons">
        <button onclick="setTestData()">📝 테스트 데이터 설정</button>
        <button onclick="checkData()">🔍 데이터 확인</button>
        <button onclick="clearData()">🗑️ 데이터 삭제</button>
    </div>
    <div id="status" class="status"></div>
    <pre id="output"></pre>
    
    <script>
        function setTestData() {
            const testResult = {
                recommendations: [
                    {
                        name: "Tokino Sora",
                        matchScore: 0.92,
                        matchingTraits: ["귀여운", "노래 잘함", "친절함"],
                        reasoning: "당신의 취향과 가장 잘 맞는 멤버입니다. 노래를 좋아하고 귀여운 스타일을 선호하는 당신에게 완벽한 매치입니다."
                    },
                    {
                        name: "Sakura Miko",
                        matchScore: 0.85,
                        matchingTraits: ["재미있는", "게임", "엘리트"],
                        reasoning: "게임과 재미를 추구하는 당신과 잘 맞습니다."
                    }
                ],
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('lastMatchResult', JSON.stringify(testResult));
            document.getElementById('status').className = 'status success';
            document.getElementById('status').textContent = '✅ 테스트 데이터가 설정되었습니다!';
            document.getElementById('output').textContent = JSON.stringify(testResult, null, 2);
        }
        
        function checkData() {
            const data = localStorage.getItem('lastMatchResult');
            if (data) {
                try {
                    const parsed = JSON.parse(data);
                    document.getElementById('status').className = 'status info';
                    document.getElementById('status').textContent = '📊 저장된 데이터:';
                    document.getElementById('output').textContent = JSON.stringify(parsed, null, 2);
                } catch (e) {
                    document.getElementById('status').className = 'status error';
                    document.getElementById('status').textContent = '⚠️ 데이터가 손상되었습니다. 삭제 후 다시 설정해주세요.';
                    document.getElementById('output').textContent = '에러: ' + e.message + '\n\n원본 데이터:\n' + data;
                }
            } else {
                document.getElementById('status').className = 'status info';
                document.getElementById('status').textContent = '💭 저장된 데이터가 없습니다.';
                document.getElementById('output').textContent = '';
            }
        }
        
        function clearData() {
            localStorage.removeItem('lastMatchResult');
            document.getElementById('status').className = 'status success';
            document.getElementById('status').textContent = '🗑️ 데이터가 삭제되었습니다!';
            document.getElementById('output').textContent = '';
        }
        
        // 페이지 로드 시 데이터 확인
        window.onload = checkData;
    </script>
</body>
</html>