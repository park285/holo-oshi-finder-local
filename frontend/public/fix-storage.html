<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix Storage</title>
    <style>
        body {
            font-family: 'Pretendard', -apple-system, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { color: #FFB7C5; text-align: center; }
        .section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        button {
            background: linear-gradient(90deg, #FFB7C5, #FF85C0);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            margin: 5px;
        }
        button:hover { opacity: 0.9; }
        pre {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-size: 12px;
            line-height: 1.5;
        }
        .success { color: #52C41A; font-weight: bold; }
        .error { color: #FF7875; font-weight: bold; }
        .warning { color: #FFD666; font-weight: bold; }
    </style>
</head>
<body>
    <h1>ğŸŒ¸ Holo-Oshi Finder - Storage ì™„ì „ ì •ë¦¬</h1>
    
    <div class="section">
        <h2>1ë‹¨ê³„: í˜„ì¬ ìƒíƒœ í™•ì¸</h2>
        <button onclick="checkCurrentData()">í˜„ì¬ ë°ì´í„° í™•ì¸</button>
        <pre id="current-data"></pre>
    </div>
    
    <div class="section">
        <h2>2ë‹¨ê³„: ë°ì´í„° ì™„ì „ ì‚­ì œ</h2>
        <button onclick="deleteAllData()">ëª¨ë“  ë°ì´í„° ì‚­ì œ</button>
        <div id="delete-status"></div>
    </div>
    
    <div class="section">
        <h2>3ë‹¨ê³„: ìƒˆ ë°ì´í„° ì„¤ì •</h2>
        <button onclick="setNewData()">ê¹¨ë—í•œ í•œê¸€ ë°ì´í„° ì„¤ì •</button>
        <pre id="new-data"></pre>
    </div>
    
    <div class="section">
        <h2>4ë‹¨ê³„: í™•ì¸</h2>
        <button onclick="verifyData()">ë°ì´í„° ê²€ì¦</button>
        <pre id="verify-result"></pre>
    </div>

    <script>
        function checkCurrentData() {
            const data = localStorage.getItem('lastMatchResult');
            const output = document.getElementById('current-data');
            
            if (data) {
                try {
                    const parsed = JSON.parse(data);
                    output.innerHTML = '<span class="warning">í˜„ì¬ ì €ì¥ëœ ë°ì´í„°:</span>\n' + JSON.stringify(parsed, null, 2);
                    
                    // ê¹¨ì§„ ë¬¸ì ì²´í¬
                    if (JSON.stringify(parsed).includes('ï¿½')) {
                        output.innerHTML += '\n\n<span class="error">âš ï¸ ê¹¨ì§„ ë¬¸ìê°€ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤! ì‚­ì œê°€ í•„ìš”í•©ë‹ˆë‹¤.</span>';
                    }
                } catch (e) {
                    output.innerHTML = '<span class="error">ì—ëŸ¬: ' + e.message + '</span>';
                }
            } else {
                output.innerHTML = '<span class="success">ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</span>';
            }
        }
        
        function deleteAllData() {
            // localStorage ì™„ì „ ì‚­ì œ
            localStorage.clear();
            sessionStorage.clear();
            
            // ëª¨ë“  í‚¤ í™•ì¸ í›„ ì‚­ì œ
            const keys = Object.keys(localStorage);
            keys.forEach(key => {
                localStorage.removeItem(key);
            });
            
            const status = document.getElementById('delete-status');
            status.innerHTML = '<span class="success">âœ… ëª¨ë“  ë°ì´í„°ê°€ ì™„ì „íˆ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤!</span>';
            
            // í™•ì¸
            const remaining = localStorage.getItem('lastMatchResult');
            if (remaining) {
                status.innerHTML += '<br><span class="error">âš ï¸ ì•„ì§ ë°ì´í„°ê°€ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ìºì‹œë¥¼ ì™„ì „íˆ ì§€ì›Œì£¼ì„¸ìš”.</span>';
            }
        }
        
        function setNewData() {
            const newResult = {
                recommendations: [
                    {
                        name: "Usada Pekora",
                        matchScore: 0.95,
                        matchingTraits: ["ì¥ë‚œê¸° ë§ì€", "ê²Œì„ ì¢‹ì•„í•¨", "í™œë°œí•¨"],
                        reasoning: "ë‹¹ì‹ ì˜ í™œë°œí•˜ê³  ì¬ë¯¸ë¥¼ ì¶”êµ¬í•˜ëŠ” ì„±ê²©ê³¼ ì™„ë²½í•˜ê²Œ ë§¤ì¹˜ë˜ëŠ” ë©¤ë²„ì…ë‹ˆë‹¤.",
                        generation: "3ê¸°ìƒ",
                        branch: "JP",
                        tags: ["ê²Œì´ë¨¸", "ì½”ë¯¸ë””ì–¸", "ì—”í„°í…Œì´ë„ˆ"],
                        personality: ["í™œë°œí•œ", "ì¥ë‚œê¸° ë§ì€", "ì¹œê·¼í•œ"],
                        streamStyle: "ê²Œì„ ìœ„ì£¼ì˜ ì¬ë¯¸ìˆëŠ” ë°©ì†¡"
                    },
                    {
                        name: "Inugami Korone",
                        matchScore: 0.88,
                        matchingTraits: ["ê²Œì„", "ê·€ì—¬ìš´", "í™œë°œí•œ"],
                        reasoning: "ê²Œì„ì„ ì¢‹ì•„í•˜ê³  ë°ì€ ì—ë„ˆì§€ë¥¼ ì„ í˜¸í•˜ëŠ” ë‹¹ì‹ ê³¼ ì˜ ë§ìŠµë‹ˆë‹¤.",
                        generation: "Gamers",
                        branch: "JP",
                        tags: ["ê²Œì´ë¨¸", "ë ˆíŠ¸ë¡œ ê²Œì„"],
                        personality: ["ë°ì€", "ê¸ì •ì ", "ì—´ì •ì "],
                        streamStyle: "ì¥ì‹œê°„ ê²Œì„ ìŠ¤íŠ¸ë¦¬ë°"
                    },
                    {
                        name: "Minato Aqua",
                        matchScore: 0.82,
                        matchingTraits: ["ê²Œì´ë¨¸", "ê·€ì—¬ìš´", "ë…¸ë ¥íŒŒ"],
                        reasoning: "ê²Œì„ ì‹¤ë ¥ê³¼ ê·€ì—¬ì›€ì„ ë™ì‹œì— ì¶”êµ¬í•˜ëŠ” ë‹¹ì‹ ì˜ ì·¨í–¥ì— ë¶€í•©í•©ë‹ˆë‹¤.",
                        generation: "2ê¸°ìƒ",
                        branch: "JP",
                        tags: ["ê²Œì´ë¨¸", "ì•„ì´ëŒ"],
                        personality: ["ìˆ˜ì¤ì€", "ì§„ì§€í•œ", "ë…¸ë ¥í•˜ëŠ”"],
                        streamStyle: "FPS ê²Œì„ê³¼ ë…¸ë˜"
                    }
                ],
                analysisConfidence: 0.92,
                processingTime: 1250,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('lastMatchResult', JSON.stringify(newResult));
            
            const output = document.getElementById('new-data');
            output.innerHTML = '<span class="success">âœ… ìƒˆ ë°ì´í„°ê°€ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤:</span>\n' + JSON.stringify(newResult, null, 2);
        }
        
        function verifyData() {
            const data = localStorage.getItem('lastMatchResult');
            const output = document.getElementById('verify-result');
            
            if (data) {
                try {
                    const parsed = JSON.parse(data);
                    
                    // ê¹¨ì§„ ë¬¸ì ì²´í¬
                    const dataStr = JSON.stringify(parsed);
                    if (dataStr.includes('ï¿½')) {
                        output.innerHTML = '<span class="error">âŒ ì—¬ì „íˆ ê¹¨ì§„ ë¬¸ìê°€ ìˆìŠµë‹ˆë‹¤!</span>';
                    } else if (parsed.recommendations && parsed.recommendations[0].name === "Usada Pekora") {
                        output.innerHTML = '<span class="success">âœ… ë°ì´í„°ê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤!</span>\n';
                        output.innerHTML += 'ì²« ë²ˆì§¸ ì¶”ì²œ: ' + parsed.recommendations[0].name + '\n';
                        output.innerHTML += 'ë§¤ì¹­ë„: ' + Math.round(parsed.recommendations[0].matchScore * 100) + '%\n';
                        output.innerHTML += 'íŠ¹ì„±: ' + parsed.recommendations[0].matchingTraits.join(', ');
                    } else {
                        output.innerHTML = '<span class="warning">âš ï¸ ë°ì´í„°ëŠ” ìˆì§€ë§Œ ì˜ˆìƒê³¼ ë‹¤ë¦…ë‹ˆë‹¤.</span>';
                    }
                } catch (e) {
                    output.innerHTML = '<span class="error">íŒŒì‹± ì—ëŸ¬: ' + e.message + '</span>';
                }
            } else {
                output.innerHTML = '<span class="error">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤!</span>';
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ í™•ì¸
        window.onload = checkCurrentData;
    </script>
</body>
</html>